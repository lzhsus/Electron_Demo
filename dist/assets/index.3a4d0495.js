import{i as reactive,j as computed,k as hooks,l as watch,r as ref,n as onMounted,a as resolveComponent,o as openBlock,c as createElementBlock,b as createBaseVNode,f as createVNode,w as withCtx,q as createBlock,e as createTextVNode,t as toDisplayString,s as createCommentVNode,u as unref,F as Fragment,v as viewuiplus_min,m as main}from"./moment.a3274826.js";var index_vue_vue_type_style_index_0_lang=(()=>`.index-page{width:100%}.mt{margin-top:20px}.fooder{width:100%;padding:20px 0;display:flex;justify-content:center;align-items:center}.ivu-number-info-total{color:#19be6b}
`)();const _hoisted_1={class:"index-page"},_hoisted_2={key:0},_hoisted_3={key:0},_hoisted_4={key:0},_hoisted_5={class:"fooder"},_hoisted_6=createTextVNode("\u67E5 \u8BE2"),_hoisted_7={class:"fooder"},_hoisted_8=createTextVNode(" \u662F\u5426\u66F4\u65B0Cookie\uFF1A"),_hoisted_9=createTextVNode("\u67E5\u8BE2\u6570\u636E"),_hoisted_10=createBaseVNode("div",{id:"htmlContainer",class:"html-content"},null,-1),_hoisted_11=createTextVNode("\u8FDB\u5165\u6E38\u620F"),_sfc_main={__name:"index",setup(__props){const form=reactive({pageShow:!1,loading:!1,columns:[{title:"\u65E5\u671F",key:"days",width:100},{title:"\u5F00\u59CB",key:"ss",width:180},{title:"\u7ED3\u675F",key:"ee",slot:"v_ee",width:180},{title:"\u5DE5\u65F6",key:"time",slot:"v_time",align:"center"},{title:"\u5269\u4F59(\u79D2)",key:"second",slot:"v_second",align:"center"},{title:"\u5269\u4F59(\u5206)",key:"minute",slot:"v_minute",align:"center"}],data:[],countSecond:0,countHH:0,htmlValue:"",cookie:""}),dataTime=computed(()=>form.data.map(e=>{if(e._ee=null,e.ss&&e.ee){let o=hooks(e.ee).format("X")-hooks(e.ss).format("X");o=o-1*60*60,e.second=o-8*60*60,e.minute=((o-8*60*60)/60).toFixed(3),e.time=(o/60/60).toFixed(3)}if(e.ss&&!e.ee){let o=Number(hooks(e.ss).format("X"))+3600+28800+Number(-form.countSecond);e._ee=hooks(o*1e3).format("YYYY-MM-DD HH:mm:ss"),console.log("_ee",e._ee)}return e}));watch(dataTime,(newValue,oldValue)=>{form.countSecond=eval(newValue.map(e=>Number(e.second||0)).join("+")),form.countHH=eval(newValue.map(e=>Number(e.time||0)).join("+")).toFixed(3)});const initLoaderData=function(e=null){localStorage.setItem("htmlData",e);function o(n){return n=n.replace(/[\r]/g,""),n}var a=o(e);let _=/<td class="column-workfrom_at">\r{0,100}\n{0,100}\ {0,100}\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}\r{0,100}\n{0,100}\ {0,100}<\/td>/gm,c=/<td class="column-workend_at">\r{0,100}\n{0,100}\ {0,100}\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}\r{0,100}\n{0,100}\ {0,100}<\/td>/gm,m=/\r{0,100}\n{0,100}\ {0,100}\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}\r{0,100}\n{0,100}\ {0,100}/gm;var s=function(n,l){return n.match(l).map(t=>t.match(m)[0])};let p=s(a,_),d=s(a,c),i=[];for(let n=5;n>=1;n--){let l=hooks().startOf("week").add(n,"day").format("YYYYMMDD"),u=p.filter(r=>hooks(r).format("YYYYMMDD")==l)[0],t=d.filter(r=>hooks(r).format("YYYYMMDD")==l)[0];i.push({days:l,ss:u,ee:t,name:hooks(l).day()})}form.data=i},lookSubmit=()=>{if(!form.htmlValue){viewuiplus_min.exports.Notice.warning({title:"\u8BF7\u8F93\u5165\u67E5\u8BE2\u7684\u5185\u5BB9"});return}initLoaderData(form.htmlValue)},getStorage=(e,o)=>{const a=localStorage.getItem(e);return a?JSON.parse(a):o},team_user_id=ref(getStorage("team_user_id","")),nickname=ref(getStorage("nickname","")),password=ref(getStorage("password","")),updata=ref(getStorage("updata",!1));watch(team_user_id,e=>localStorage.setItem("team_user_id",JSON.stringify(e))),watch(nickname,e=>localStorage.setItem("nickname",JSON.stringify(e))),watch(password,e=>localStorage.setItem("password",JSON.stringify(e))),watch(updata,e=>localStorage.setItem("updata",JSON.stringify(e)));const lookApiSubmit=()=>{fetch(`http://localhost:3011/api/html?team_user_id=${team_user_id.value}&nickname=${nickname.value}&password=${password.value}&updata=${updata.value}`).then(e=>e.json()).then(e=>{initLoaderData(e.data)}).catch(e=>console.error("\u8BF7\u6C42\u51FA\u9519:",e))},change=e=>{updata.value=e},gameSubmit=()=>{window.location.href="http://localhost:3000/game/index.html"};return onMounted(()=>{let e=localStorage.getItem("htmlData");e&&initLoaderData(e)}),(e,o)=>{const a=resolveComponent("Text"),_=resolveComponent("Table"),c=resolveComponent("NumberInfo"),m=resolveComponent("Card"),s=resolveComponent("Col"),p=resolveComponent("Row"),d=resolveComponent("Input"),i=resolveComponent("Button"),n=resolveComponent("Switch"),l=resolveComponent("Space"),u=resolveComponent("Spin");return openBlock(),createElementBlock(Fragment,null,[createBaseVNode("div",_hoisted_1,[createVNode(_,{columns:form.columns,data:unref(dataTime)},{v_ee:withCtx(({row:t,index:r})=>[createBaseVNode("div",null,[t.ee?(openBlock(),createBlock(a,{key:0,strong:""},{default:withCtx(()=>[createTextVNode(toDisplayString(t.ee),1)]),_:2},1024)):createCommentVNode("",!0),t._ee?(openBlock(),createBlock(a,{key:1,strong:"",style:{color:"#ed4014"}},{default:withCtx(()=>[createTextVNode(toDisplayString(t._ee),1)]),_:2},1024)):createCommentVNode("",!0)])]),v_time:withCtx(({row:t,index:r})=>[t.ss&&t.ee?(openBlock(),createElementBlock("div",_hoisted_2,[t.time>=8?(openBlock(),createBlock(a,{key:0,strong:"",style:{color:"#19be6b"}},{default:withCtx(()=>[createTextVNode(toDisplayString(t.time),1)]),_:2},1024)):(openBlock(),createBlock(a,{key:1,strong:"",style:{color:"#ed4014"}},{default:withCtx(()=>[createTextVNode(toDisplayString(t.time),1)]),_:2},1024))])):createCommentVNode("",!0)]),v_second:withCtx(({row:t,index:r})=>[t.ss&&t.ee?(openBlock(),createElementBlock("div",_hoisted_3,[t.time>=8?(openBlock(),createBlock(a,{key:0,strong:"",style:{color:"#19be6b"}},{default:withCtx(()=>[createTextVNode(toDisplayString(t.second),1)]),_:2},1024)):(openBlock(),createBlock(a,{key:1,strong:"",style:{color:"#ed4014"}},{default:withCtx(()=>[createTextVNode(toDisplayString(t.second),1)]),_:2},1024))])):createCommentVNode("",!0)]),v_minute:withCtx(({row:t,index:r})=>[t.ss&&t.ee?(openBlock(),createElementBlock("div",_hoisted_4,[t.time>=8?(openBlock(),createBlock(a,{key:0,strong:"",style:{color:"#19be6b"}},{default:withCtx(()=>[createTextVNode(toDisplayString(t.minute),1)]),_:2},1024)):(openBlock(),createBlock(a,{key:1,strong:"",style:{color:"#ed4014"}},{default:withCtx(()=>[createTextVNode(toDisplayString(t.minute),1)]),_:2},1024))])):createCommentVNode("",!0)]),_:1},8,["columns","data"]),createVNode(p,{class:"mt"},{default:withCtx(()=>[createVNode(s,{span:"7"},{default:withCtx(()=>[createVNode(m,null,{default:withCtx(()=>[createVNode(a,{strong:""},{default:withCtx(()=>[createVNode(c,{"sub-title":"\u5408\u8BA1\u65F6\u95F4\u5DEE\u503C-\u79D2\u6570",total:form.countSecond||0},null,8,["total"])]),_:1})]),_:1})]),_:1}),createVNode(s,{span:"1"}),createVNode(s,{span:"7"},{default:withCtx(()=>[createVNode(m,null,{default:withCtx(()=>[createVNode(a,{strong:""},{default:withCtx(()=>[createVNode(c,{"sub-title":"\u5408\u8BA1\u65F6\u95F4\u5DEE\u503C-\u5206\u949F",total:(form.countSecond||0)/60},null,8,["total"])]),_:1})]),_:1})]),_:1}),createVNode(s,{span:"1"}),createVNode(s,{span:"7"},{default:withCtx(()=>[createVNode(m,null,{default:withCtx(()=>[createVNode(a,{strong:""},{default:withCtx(()=>[createVNode(c,{"sub-title":"\u7D2F\u8BA1\u65F6\u957F-\u5F53\u524D",total:form.countHH||0},null,8,["total"])]),_:1})]),_:1})]),_:1})]),_:1}),createVNode(d,{class:"mt",modelValue:form.htmlValue,"onUpdate:modelValue":o[0]||(o[0]=t=>form.htmlValue=t),type:"textarea",rows:6,placeholder:"\u8BF7\u8F93\u5165"},null,8,["modelValue"]),createBaseVNode("div",_hoisted_5,[createVNode(i,{class:"btn",type:"primary",size:"large",long:"",onClick:o[1]||(o[1]=t=>lookSubmit())},{default:withCtx(()=>[_hoisted_6]),_:1})]),createBaseVNode("div",_hoisted_7,[createVNode(l,{direction:"vertical"},{default:withCtx(()=>[createVNode(d,{prefix:"ios-contact-outline",size:"large",placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u540D",style:{width:"auto"},modelValue:nickname.value,"onUpdate:modelValue":o[2]||(o[2]=t=>nickname.value=t)},null,8,["modelValue"]),createVNode(d,{type:"password",password:"",prefix:"ios-lock-outline",size:"large",placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801",style:{width:"auto"},modelValue:password.value,"onUpdate:modelValue":o[3]||(o[3]=t=>password.value=t)},null,8,["modelValue"]),createVNode(d,{prefix:"ios-disc-outline",size:"large",placeholder:"\u8BF7\u8F93\u5165\u7528\u6237ID",style:{width:"auto"},modelValue:team_user_id.value,"onUpdate:modelValue":o[4]||(o[4]=t=>team_user_id.value=t)},null,8,["modelValue"]),createVNode(l,null,{default:withCtx(()=>[_hoisted_8,createVNode(n,{modelValue:e.value,"onUpdate:modelValue":o[5]||(o[5]=t=>e.value=t),onOnChange:change},null,8,["modelValue"])]),_:1}),createVNode(i,{class:"btn",type:"error",size:"large",long:"",onClick:o[6]||(o[6]=t=>lookApiSubmit())},{default:withCtx(()=>[_hoisted_9]),_:1})]),_:1})]),_hoisted_10]),createVNode(u,{size:"large",fix:"",show:form.loading},null,8,["show"]),createVNode(i,{class:"btn",type:"primary",size:"large",long:"",onClick:o[7]||(o[7]=t=>gameSubmit())},{default:withCtx(()=>[_hoisted_11]),_:1})],64)}}};main(_sfc_main);

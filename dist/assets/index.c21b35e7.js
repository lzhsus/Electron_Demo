import{r as ref,c as computed,q as hooks,s as reactive,w as watch,o as onMounted,a as onUnmounted,b as resolveComponent,d as openBlock,e as createElementBlock,f as createBaseVNode,t as toDisplayString,u as unref,j as createVNode,k as withCtx,v as createBlock,h as createTextVNode,i as createCommentVNode,F as Fragment,x as viewuiplus_min,m as main}from"./moment.85bd5973.js";var index_vue_vue_type_style_index_0_lang=(()=>`.index-page{width:100%}.mt{margin-top:20px}.fooder{width:100%;padding:20px 0;display:flex;justify-content:center;align-items:center}.ivu-number-info-total{color:#19be6b}.format-time{padding:10px 10px 20px;display:flex;justify-content:center;align-items:center;font-size:16px;font-weight:700;letter-spacing:2px}
`)();const _hoisted_1={class:"index-page"},_hoisted_2={class:"format-time"},_hoisted_3=createTextVNode("\u5F53\u524D\u65F6\u95F4\uFF1A"),_hoisted_4={style:{color:"#ed4014"}},_hoisted_5={key:0},_hoisted_6={key:0},_hoisted_7={key:0},_hoisted_8={class:"fooder"},_hoisted_9=createTextVNode(" \u662F\u5426\u66F4\u65B0Cookie\uFF1A"),_hoisted_10=createTextVNode("\u67E5\u8BE2\u6570\u636E"),_hoisted_11=createTextVNode("\u66F4\u65B0IP"),_hoisted_12=createBaseVNode("div",{id:"htmlContainer",class:"html-content"},null,-1),_sfc_main={__name:"index",setup(__props){const currentTime=ref(new Date);let animationFrameId=null;const formattedTime=computed(()=>hooks(currentTime.value).format("YYYY-MM-DD HH:mm:ss")),createCurrentTime=()=>{currentTime.value=new Date,animationFrameId=requestAnimationFrame(createCurrentTime)},form=reactive({pageShow:!1,loading:!1,columns:[{title:"\u65E5\u671F",key:"days",width:100},{title:"\u5F00\u59CB",key:"ss",width:180},{title:"\u7ED3\u675F",key:"ee",slot:"v_ee",width:180},{title:"\u5DE5\u65F6",key:"time",slot:"v_time",align:"center"},{title:"\u5269\u4F59(\u79D2)",key:"second",slot:"v_second",align:"center"},{title:"\u5269\u4F59(\u5206)",key:"minute",slot:"v_minute",align:"center"}],data:[],countSecond:0,countHH:0,htmlValue:"",cookie:""}),dataTime=computed(()=>form.data.map(e=>{if(e._ee=null,e.ss&&e.ee){let o=hooks(e.ee).format("X")-hooks(e.ss).format("X");o=o-1*60*60,e.second=o-8*60*60,e.minute=((o-8*60*60)/60).toFixed(3),e.time=(o/60/60).toFixed(3)}if(e.ss&&!e.ee){let o=Number(hooks(e.ss).format("X"))+3600+28800+Number(-form.countSecond);e._ee=hooks(o*1e3).format("YYYY-MM-DD HH:mm:ss"),console.log("_ee",e._ee)}return e}));watch(dataTime,(newValue,oldValue)=>{form.countSecond=eval(newValue.map(e=>Number(e.second||0)).join("+")),form.countHH=eval(newValue.map(e=>Number(e.time||0)).join("+")).toFixed(3)});const initLoaderData=function(e=null){localStorage.setItem("htmlData",e);function o(n){return n=n.replace(/[\r]/g,""),n}var a=o(e);let p=/<td class="column-workfrom_at">\r{0,100}\n{0,100}\ {0,100}\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}\r{0,100}\n{0,100}\ {0,100}<\/td>/gm,c=/<td class="column-workend_at">\r{0,100}\n{0,100}\ {0,100}\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}\r{0,100}\n{0,100}\ {0,100}<\/td>/gm,i=/\r{0,100}\n{0,100}\ {0,100}\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}\r{0,100}\n{0,100}\ {0,100}/gm;var s=function(n,l){let d=n.match(l);return d&&d.map(t=>t.match(i)[0])};let _=s(a,p),m=s(a,c),u=[];for(let n=5;n>=1;n--){let l=hooks().startOf("week").add(n,"day").format("YYYYMMDD"),d=_.filter(r=>hooks(r).format("YYYYMMDD")==l)[0],t=m.filter(r=>hooks(r).format("YYYYMMDD")==l)[0];u.push({days:l,ss:d,ee:t,name:hooks(l).day()})}form.data=u},getStorage=(e,o)=>{const a=localStorage.getItem(e);return a?JSON.parse(a):o},team_user_id=ref(getStorage("team_user_id","")),nickname=ref(getStorage("nickname","")),password=ref(getStorage("password","")),updata=ref(getStorage("updata",!1));watch(team_user_id,e=>localStorage.setItem("team_user_id",JSON.stringify(e))),watch(nickname,e=>localStorage.setItem("nickname",JSON.stringify(e))),watch(password,e=>localStorage.setItem("password",JSON.stringify(e))),watch(updata,e=>localStorage.setItem("updata",JSON.stringify(e)));const lookApiSubmit=()=>{fetch(`http://localhost:3033/api/html?team_user_id=${team_user_id.value}&nickname=${nickname.value}&password=${password.value}&updata=${updata.value}`).then(e=>e.json()).then(e=>{initLoaderData(e.data)}).catch(e=>console.error("\u8BF7\u6C42\u51FA\u9519:",e))},change=e=>{updata.value=e},updataIp=()=>{fetch("http://localhost:3033/api/ip?nickname=\u9F99\u5F20\u6D77&password=U18FAevUUDBk1eYl").then(e=>e.json()).then(e=>{viewuiplus_min.exports.Message.success("\u66F4\u65B0\u6210\u529F\uFF01")}).catch(e=>console.error("\u8BF7\u6C42\u51FA\u9519:",e))};return onMounted(()=>{let e=localStorage.getItem("htmlData");e&&initLoaderData(e),createCurrentTime()}),onUnmounted(()=>{cancelAnimationFrame(animationFrameId)}),(e,o)=>{const a=resolveComponent("Text"),p=resolveComponent("Table"),c=resolveComponent("NumberInfo"),i=resolveComponent("Card"),s=resolveComponent("Col"),_=resolveComponent("Row"),m=resolveComponent("Input"),u=resolveComponent("Switch"),n=resolveComponent("Space"),l=resolveComponent("Button"),d=resolveComponent("Spin");return openBlock(),createElementBlock(Fragment,null,[createBaseVNode("div",_hoisted_1,[createBaseVNode("div",_hoisted_2,[_hoisted_3,createBaseVNode("span",_hoisted_4,toDisplayString(unref(formattedTime)),1)]),createVNode(p,{columns:form.columns,data:unref(dataTime)},{v_ee:withCtx(({row:t,index:r})=>[createBaseVNode("div",null,[t.ee?(openBlock(),createBlock(a,{key:0,strong:""},{default:withCtx(()=>[createTextVNode(toDisplayString(t.ee),1)]),_:2},1024)):createCommentVNode("",!0),t._ee?(openBlock(),createBlock(a,{key:1,strong:"",style:{color:"#ed4014"}},{default:withCtx(()=>[createTextVNode(toDisplayString(t._ee),1)]),_:2},1024)):createCommentVNode("",!0)])]),v_time:withCtx(({row:t,index:r})=>[t.ss&&t.ee?(openBlock(),createElementBlock("div",_hoisted_5,[t.time>=8?(openBlock(),createBlock(a,{key:0,strong:"",style:{color:"#19be6b"}},{default:withCtx(()=>[createTextVNode(toDisplayString(t.time),1)]),_:2},1024)):(openBlock(),createBlock(a,{key:1,strong:"",style:{color:"#ed4014"}},{default:withCtx(()=>[createTextVNode(toDisplayString(t.time),1)]),_:2},1024))])):createCommentVNode("",!0)]),v_second:withCtx(({row:t,index:r})=>[t.ss&&t.ee?(openBlock(),createElementBlock("div",_hoisted_6,[t.time>=8?(openBlock(),createBlock(a,{key:0,strong:"",style:{color:"#19be6b"}},{default:withCtx(()=>[createTextVNode(toDisplayString(t.second),1)]),_:2},1024)):(openBlock(),createBlock(a,{key:1,strong:"",style:{color:"#ed4014"}},{default:withCtx(()=>[createTextVNode(toDisplayString(t.second),1)]),_:2},1024))])):createCommentVNode("",!0)]),v_minute:withCtx(({row:t,index:r})=>[t.ss&&t.ee?(openBlock(),createElementBlock("div",_hoisted_7,[t.time>=8?(openBlock(),createBlock(a,{key:0,strong:"",style:{color:"#19be6b"}},{default:withCtx(()=>[createTextVNode(toDisplayString(t.minute),1)]),_:2},1024)):(openBlock(),createBlock(a,{key:1,strong:"",style:{color:"#ed4014"}},{default:withCtx(()=>[createTextVNode(toDisplayString(t.minute),1)]),_:2},1024))])):createCommentVNode("",!0)]),_:1},8,["columns","data"]),createVNode(_,{class:"mt"},{default:withCtx(()=>[createVNode(s,{span:"7"},{default:withCtx(()=>[createVNode(i,null,{default:withCtx(()=>[createVNode(a,{strong:""},{default:withCtx(()=>[createVNode(c,{"sub-title":"\u5408\u8BA1\u65F6\u95F4\u5DEE\u503C-\u79D2\u6570",total:form.countSecond||0},null,8,["total"])]),_:1})]),_:1})]),_:1}),createVNode(s,{span:"1"}),createVNode(s,{span:"7"},{default:withCtx(()=>[createVNode(i,null,{default:withCtx(()=>[createVNode(a,{strong:""},{default:withCtx(()=>[createVNode(c,{"sub-title":"\u5408\u8BA1\u65F6\u95F4\u5DEE\u503C-\u5206\u949F",total:(form.countSecond||0)/60},null,8,["total"])]),_:1})]),_:1})]),_:1}),createVNode(s,{span:"1"}),createVNode(s,{span:"7"},{default:withCtx(()=>[createVNode(i,null,{default:withCtx(()=>[createVNode(a,{strong:""},{default:withCtx(()=>[createVNode(c,{"sub-title":"\u7D2F\u8BA1\u65F6\u957F-\u5F53\u524D",total:form.countHH||0},null,8,["total"])]),_:1})]),_:1})]),_:1})]),_:1}),createBaseVNode("div",_hoisted_8,[createVNode(n,{direction:"vertical"},{default:withCtx(()=>[createVNode(m,{prefix:"ios-contact-outline",size:"large",placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u540D",style:{width:"auto"},modelValue:nickname.value,"onUpdate:modelValue":o[0]||(o[0]=t=>nickname.value=t)},null,8,["modelValue"]),createVNode(m,{type:"password",password:"",prefix:"ios-lock-outline",size:"large",placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801",style:{width:"auto"},modelValue:password.value,"onUpdate:modelValue":o[1]||(o[1]=t=>password.value=t)},null,8,["modelValue"]),createVNode(m,{prefix:"ios-disc-outline",size:"large",placeholder:"\u8BF7\u8F93\u5165\u7528\u6237ID",style:{width:"auto"},modelValue:team_user_id.value,"onUpdate:modelValue":o[2]||(o[2]=t=>team_user_id.value=t)},null,8,["modelValue"]),createVNode(n,null,{default:withCtx(()=>[_hoisted_9,createVNode(u,{modelValue:e.value,"onUpdate:modelValue":o[3]||(o[3]=t=>e.value=t),onOnChange:change},null,8,["modelValue"])]),_:1}),createVNode(l,{class:"btn",type:"error",size:"large",long:"",onClick:o[4]||(o[4]=t=>lookApiSubmit())},{default:withCtx(()=>[_hoisted_10]),_:1}),createVNode(l,{class:"btn",type:"",size:"large",long:"",onClick:o[5]||(o[5]=t=>updataIp())},{default:withCtx(()=>[_hoisted_11]),_:1})]),_:1})]),_hoisted_12]),createVNode(d,{size:"large",fix:"",show:form.loading},null,8,["show"])],64)}}};main(_sfc_main);
